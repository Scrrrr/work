<!-- ハンバーガーメニュー -->
        <button id="hamburger" class="hamburger" aria-label="メニューを開く">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <!-- オーバーレイ -->
        <div id="sidebarOverlay" class="sidebar-overlay"></div>

        <div class="container">
            <!-- サイドバー（目次） -->
            <nav class="sidebar">
                <h3>目次</h3>
                <ul class="toc">
<li><a href="#1">RockyLinuxのインストール</a>
<ul>
<li><a href="#1.1">言語選択</a></li>
<li><a href="#1.2">インストール先</a></li>
<li><a href="#1.3">Kdump</a></li>
<li><a href="#1.4">ネットワーク設定</a></li>
<li><a href="#1.5">時刻と日付の設定</a></li>
<li><a href="#1.6">追加ソフトウェアの選択</a></li>
<li><a href="#1.7">rootパスワードの設定</a></li>
<li><a href="#1.8">ユーザーの作成</a></li>
<li><a href="#1.9">インストールの開始</a></li>
</ul>
</li>
<li><a href="#2">基本設定</a>
<ul>
<li><a href="#2.1">ログイン</a></li>
<li><a href="#2.2">端末の起動</a></li>
<li><a href="#2.3">SELinuxの無効化</a></li>
<li><a href="#2.4">電源の設定</a></li>
<li><a href="#2.5">各ツール別のプロキシ設定</a></li>
</ul>
</li>
<li><a href="#3">メールサーバの構築</a>
<ul>
<li><a href="#3.1">Postfix</a></li>
<li><a href="#3.2">クライアントからのメール送信確認</a></li>
<li><a href="#3.3">Dovecot（POP3）</a></li>
<li><a href="#3.4">ファイアウォールの設定</a></li>
<li><a href="#3.5">クライアントからの動作確認</a></li>
</ul>
</li>
<li><a href="#4">WEBサーバの構築</a>
<ul>
<li><a href="#4.1">httpdの設定</a></li>
<li><a href="#4.2">コンテンツの設置</a></li>
<li><a href="#4.3">サーバでの動作確認</a></li>
<li><a href="#4.4">ファイアウォールの設定</a></li>
<li><a href="#4.5">クライアントからの動作確認</a></li>
</ul>
</li>
</ul>
            </nav>

            <!-- メインコンテンツ -->
            <main class="main-content">
                <h1 id="1">RockyLinuxのインストール</h1>

<h2 id="1.1">言語選択</h2>
<p>インストールが開始されると言語選択メニューが表示されます。左のメニューの中央付近にある[日本語]を選択し、[続行]を選択します。</p>

<h2 id="1.2">インストール先</h2>
<p>システムのインストール先を決定します。</p>
<p>[インストール先]を選択すると自動でインストール先が決定されるので、左上の青いボタンの[完了]をクリックします。</p>

<div class="note">
<p><strong>注記:</strong></p>
<p>システムの[インストール先]のアイコンに注意が表示されていたのが消えていればＯＫです。</p>
</div>

<h2 id="1.3">Kdump</h2>
<p>Kdumpの無効化を行うために、[KDUMP]を選択し、[kdumpを有効にする]のチェックボックスを外し、[完了]を選択します。</p>

<h2 id="1.4">ネットワーク設定</h2>
<p>次に、ネットワークの設定を行います。[ネットワークとホスト名]を選択し、ホスト名に<code><?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp</code>を入力します。</p>

<p>ホスト名入力後、[適用]をクリックします。</p>
<div class="caution">
<p><strong>注意:</strong></p>
<p>[適用]をクリックしないと設定が反映されないため注意してください。</p>
</div>

<p>さらに、[設定]を選択し、[IPv4の設定]をクリックし、方式を<strong>自動(DHCP)</strong>から<strong>手動</strong>に変更します。</p>

<p>アドレスの[追加]を選択し、以下の項目に値を入力していきます。</p>

<table class="table-fixed">
<thead>
<tr>
<th>項目名</th>
<th>入力値</th>
</tr>
</thead>
<tbody>
<tr>
<td>アドレス</td>
<td><?php echo $serverIP; ?></td>
</tr>
<tr>
<td>ネットマスク</td>
<td>24</td>
</tr>
<tr>
<td>ゲートウェイ</td>
<td><?php echo $gatewayIP; ?></td>
</tr>
<tr>
<td>DNSサーバー</td>
<td><?php echo $serverIP; ?></td>
</tr>
<tr>
<td>ドメインを検索</td>
<td>netsys.cs.t-kougei.ac.jp, cs.t-kougei.ac.jp, t-kougei.ac.jp</td>
</tr>
</tbody>
</table>

<p>入力が完了したら[保存]を押して閉じます。</p>

<p>入力後、右上のトグルボタンをクリックして有効に切り替えます。</p>

<p>Ethernetが「接続済みです」と表示されていればネットワークの接続は完了です。</p>

<p>左上の[完了]を押します。</p>

<h2 id="1.5">時刻と日付の設定</h2>
<p>地域設定から[時刻と日付]を選択します。</p>
<p>左上の歯車マークをクリックして[使用するNTPサーバの追加]に<code>ntp-a.t-kougei.ac.jp</code>を入力して[＋]ボタンを押します。</p>

<p><code>ntp-a.t-kougei.ac.jp</code>の稼働中の項目欄にチェックがあれば完了です。</p>

<p>OKで閉じて、左上の[完了]ボタンを押します。</p>

<h2 id="1.6">追加ソフトウェアの選択</h2>
<p>インストールするソフトウェアの選択を行います。[ソフトウェアの選択]を選択し、ベース環境は[サーバー(GUI使用)]を選択します。</p>
<p>選択した環境用のその他のソフトウェアは以下を選択します。</p>
<ul>
<li>メールサーバー</li>
<li>ベーシックWebサーバー</li>
</ul>
<p>選択が完了したら、左上の[完了]をクリックします。</p>

<h2 id="1.7">rootパスワードの設定</h2>
<p>[ユーザーの設定]の[rootパスワード]をクリックします。</p>

<p>rootのパスワードには、[netsys00]を入力し、同じく確認でも同じパスワードを入力してください。</p>

<p>入力が完了したら左上の[完了]をクリックします。</p>

<div class="caution">
<p><strong>注意:</strong></p>
<p>［このパスワードは辞書チェックに失敗しました］と表示されますが、この場合完了を2回クリックします。</p>
</div>

<h2 id="1.8">ユーザーの作成</h2>
<p>ユーザーtomeを作成します。</p>

<table class="table-auto">
<thead>
<tr>
<th>項目名</th>
<th>入力値</th>
</tr>
</thead>
<tbody>
<tr>
<td>ユーザネーム</td>
<td>tome</td>
</tr>
<tr>
<td>ユーザー名</td>
<td>tome</td>
</tr>
<tr>
<td>パスワード</td>
<td>netsys00</td>
</tr>
<tr>
<td>パスワードの確認</td>
<td>netsys00</td>
</tr>
</tbody>
</table>

<div class="caution">
<p><strong>注意:</strong></p>
<p>rootのパスワードと同様に［このパスワードは辞書チェックに失敗しました］と表示されますが、この場合完了を2回クリックします。</p>
</div>

<h2 id="1.9">インストールの開始</h2>
<p>全ての設定項目が完了したら、[インストールの開始]を選択します。</p>
<div class="note">
<p><strong>注記:</strong></p>
<p>インストールには時間がかかるため、終わるまで待機してください。</p>
</div>

<p>インストールが完了したら、[システムの再起動]を選択して、サーバを再起動します。</p>
<p>サーバが停止したら、SCTSメニューより、[インストールサーバの起動]->[RockyLinux]でサーバを起動します。</p>

<h1 id="2">基本設定</h1>

<h2 id="2.1">ログイン</h2>
<p>ライセンスに同意後、ログイン画面が表示されるため、ログインを行います。rootでログインを行うため、[アカウントが見つかりませんか？]を選択しrootでログインします。</p>

<table class="table-auto">
<thead>
<tr>
<th>項目名</th>
<th>入力値</th>
</tr>
</thead>
<tbody>
<tr>
<td>ユーザネーム</td>
<td>root</td>
</tr>
<tr>
<td>パスワード</td>
<td>netsys00</td>
</tr>
</tbody>
</table>

<h2 id="2.2">端末の起動</h2>
<p>左上の[アクティビティ]をクリック、または<Win>キーを押します。</p>
<p>中央下に表示されているアイコンにカーソルを合わせるとアプリケーション名が表示されるので、そこから[端末]を探します。もしくは、<win>キーを押した後に、[Terminal]と検索して提示された[端末]というソフトを起動します。</p>

<h2 id="2.3">SELinuxの無効化</h2>
<p>SELinuxの無効化を行います。</p>

<div class="warning">
<p><strong>警告:</strong></p>
<p>この設定にミスがあるとコンピュータが起動しなくなる可能性があるため注意してください。</p>
</div>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/selinux/config</code></pre>

<p>以下を変更:</p>
<pre><code><span class="git-remove">SELINUX=enforcing</span>
<span class="git-add">#SELINUX=enforcing</span>
<span class="git-add">SELINUX=disabled</span></code></pre>

<p><div class="hint"></p>
<p><p><strong>ヒント:</strong></p></p>
<p><p>viエディタは通常モードで「h」で左に移動、「j」で下に移動、「k」で上に移動、「l」で右に移動。  </p>
<p>「i」で入力モードに切り替える。「Esc」を押して通常モードに戻る。</p>
<p>通常モードで「:w」で保存「:q」で終了、「:wq」で保存して終了。</p>

<p>また、通常モードで<code>/<探したい文字></code>で文字検索ができる。検索を辞める時は<strong><Esc></strong>キーを押す。</p></p>
<p></div>  </p>

<h2 id="2.4">電源の設定</h2>
<p>デフォルトの設定では5分起きにロックされてしまうので、設定で無効にします。</p>

<p>右上の電源アイコンをクリックして、表示された項目欄から<strong>[設定]</strong>をクリックして、設定メニューを起動します。</p>
<p>設定メニューのサイドバー中部にある<strong>[電源]</strong>を見つけクリックし、設定項目の<strong>[Screen Blank]</strong>を<code>5分</code>から<code>Naver</code>に変更します。</p>

<h2 id="2.5">各ツール別のプロキシ設定</h2>

<h3 id="2.5.1">NetworkMangaerのプロキシ設定</h3>
<p>設定メニューのサイドバー上部にある<strong>[ネットワーク]</strong>を見つけクリックし、設定項目の<strong>ネットワークプロキシ</strong>を見つけ、<strong>歯車マーク</strong>をクリックします。  </p>
<p><strong>[無効]</strong>から<strong>[手動]</strong>を変更し、次の項目に以下の入力値を入力していきます。</p>

<table class="table-fixed">
<thead>
<tr>
<th>項目名</th>
<th>入力値</th>
<th>ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTPプロキシ</td>
<td>proxy-a.t-kougei.ac.jp</td>
<td>8080</td>
</tr>
<tr>
<td>HTTPSプロキシ</td>
<td>proxy-a.t-kougei.ac.jp</td>
<td>8080</td>
</tr>
<tr>
<td>FTPプロキシ</td>
<td>proxy-a.t-kougei.ac.jp</td>
<td>8080</td>
</tr>
<tr>
<td>Socksホスト</td>
<td>proxy-a.t-kougei.ac.jp</td>
<td>8080</td>
</tr>
<tr>
<td>次のホストを無視する</td>
<td>*.t-kougei.ac.jp</td>
<td>-</td>
</tr>
</tbody>
</table>

<p>入力が完了したら×で閉じます。</p>
<p>設定メニューも×で閉じます。</p>


<h3 id="2.5.2">Bashのプロキシ設定</h3>
<p>再び端末に戻って設定を行います。  </p>
<p>新たに<code>/etc/profile.d/proxy.sh</code>ファイルを作成してプロキシ設定を記述します。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/profile.d/proxy.sh</code></pre>

<p><div class="hint"></p>
<p><p><strong>ヒント:</strong></p></p>
<p><p>viエディタは通常モードで「h」で左に移動、「j」で下に移動、「k」で上に移動、「l」で右に移動。  </p>
<p>「i」で入力モードに切り替える。「Esc」を押して通常モードに戻る。</p>
<p>通常モードで「:w」で保存「:q」で終了、「:wq」で保存して終了。</p></p>
<p></div>  </p>

<div class="code-file-info">📁 /etc/profile.d/proxy.sh</div>
<pre><code>HTTP_PROXY=http://proxy-a.t-kougei.ac.jp:8080
HTTPS_PROXY=http://proxy-a.t-kougei.ac.jp:8080

http_proxy=http://proxy-a.t-kougei.ac.jp:8080
https_proxy=http://proxy-a.t-kougei.ac.jp:8080</code></pre>

<p><code>source</code>コマンドで作成した設定ファイルを読み込ませます。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ source /etc/profile.d/proxy.sh</code></pre>

<h3 id="2.5.3">yumのプロキシ設定</h3>
<p>パッケージマネージャーyumの設定を行います。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/yum.conf</code></pre>

<p><code>skip_if_unavailable=False</code>の下に以下を記入します。</p>

<div class="code-file-info">📁 /etc/yum.conf</div>
<pre><code>…
best=True
skip_if_unavailable=False
<span class="git-add">proxy=http://proxy-a.t-kougei.ac.jp:8080</span>
<span class="git-add">timeout=900</span></code></pre>

<p>保存して終了後アップデートを行います。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ yum -y update --nobest</code></pre>

<p>問題なくアップデートが行われれば、プロキシの設定は完了です。</p>

<h1 id="3">メールサーバの構築</h1>

<p>メールサーバはメールの送受信を行うためのサーバです。  </p>
<p>メールの送信には<strong>Postfix</strong>が、受信には<strong>Davcot</strong>が使用されます。  </p>

<h2 id="3.1">Postfix</h2>
<p>Postfixは、オープンソースのメール転送エージェント(MTA: Mail Transfer Agent)で、電子メールの送信・配送を担当するサーバソフトウェアです。</p>

<p><div class="note"></p>
<p><p><strong>注記:</strong></p></p>
<p><p>OSのインストールで既にPostfixをインストールしていますが、チェック項目を忘れていた場合は以下のコマンドでインストールしてください。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ yum -y install postfix</code></pre>
<p></div></p>

<h3 id="3.1.4">Postfixの設定</h3>

<p>postfixの設定ファイルである<code>/etc/postfix/main.cf</code>を<code>vi</code>エディタで編集します。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/postfix/main.cf</code></pre>

<p>以下の設定を行います。</p>
<p>赤色は削除する場所で、緑色は追記する行です。</p>
<p>無地は周辺の設定項目を表しています。</p>

<div class="code-file-info">📁 /etc/postfix/main.cf</div>
<pre><code>#myhostname = host.domain.tld
#myhostname = virtual.domain.tld
<span class="git-add">myhostname = <?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp</span>

#mydomain = domain.tld
<span class="git-add">mydomain = netsys.cs.t-kougei.ac.jp</span>

#myorigin = $myhostname
#myorigin = $mydomain
<span class="git-add">myorigin = $mydomain</span>

<span class="git-remove">mydestination = $myhostname, localhost.$mydomain, localhost</span>
<span class="git-add">#mydestination = $myhostname, localhost.$mydomain, localhost</span>
#mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain
#mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain,
        mail.$mydomain, www.$mydomain, ftp.$mydomain
<span class="git-add">mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain</span>

#relayhost = $mydomain
#relayhost = [gateway.my.domain]
#relayhost = [mailserver.isp.tld]
#relayhost = uucphost
#relayhost = [an.ip.add.ress]
<span class="git-add">relayhost = [smtp-a.t-kougei.ac.jp</span>]

#mynetworks = 168.100.189.0/28, 127.0.0.0/8
#mynetworks = $config_directory/mynetworks
#mynetworks = hash:/etc/postfix/network_table
<span class="git-add">mynetworks = 10.10.0.0/16</span>

#inet_interfaces = all
#inet_interfaces = $myhostname
#inet_interfaces = $myhostname,localhost
<span class="git-remove">inet_interfaces = localhost</span>
<span class="git-add">#inet_interfaces = localhost</span>
<span class="git-add">inet_interfaces = all</span>

# Enable IPv4, and IPv6 if supported
<span class="git-remove">inte_protocols = all</span>
<span class="git-add">#inte_protocols = all</span>
<span class="git-add">inte_protocols = ipv4</span>

#home_mailbox = Mailbox
#home_mailbox = Maildir/
<span class="git-add">home_mailbox = Maildir/</span></code></pre>

<h3 id="3.1.5">postfixの設定の反映</h3>
<p><code>systemctl</code>コマンドでpostfixを再起動します。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ systemctl restart postfix</code></pre>

<p>また、サーバの再起動後にサービスを自動起動するように設定します。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ systemctl enable postfix</code></pre>

<h2 id="3.2">クライアントからのメール送信確認</h2>

<h3 id="3.2.6">クライアントの起動とログイン</h3>

<p>クライアントを起動して<code>mail</code>コマンドをインストールしてメールの送信テストをします。</p>

<p>SSCTSメニューから、<strong>[仮想コンピュータの操作]</strong>をクリック。<strong>[Client]</strong>の<strong>[制御]</strong>をクリックし、<strong>[起動]</strong>をクリックしてクライアントを起動します。</p>

<p>ユーザ名は<code>root</code>。パスワードは<code>netsys00</code>でログインします。</p>

<h3 id="3.2.7">クライアントのrelayhostを指定。</h3>
<p>クライアントのPostfixのメール配送先を構築したサーバに変更します。</p>
<pre><code class="language-bash">root@<?php echo $clientHostname; ?>:~$ vi /etc/postfix/main.cf</code></pre>

<p>main.cfにある既存の<code>relayhost</code>ディレクティブをコメントアウトし、新しく構築したサーバを追加します。</p>

<div class="code-file-info">📁 /etc/postfix/main.cf</div>
<pre><code>#relayhost = [smtp-a.t-kougei.ac.jp]
relayhost = [<?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp]</code></pre>

<h3 id="3.2.8">mailコマンドでtomeに送信</h3>
<p>ターミナルを起動して、<code>mail</code>コマンドでtomeに「test」というメッセージを送ります。  </p>
<pre><code class="language-bash">root@<?php echo $clientHostname; ?>:~$ echo "test" | mail tome@<?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp</code></pre>

<p>サーバの<code>/home/tome/Maildi/new</code>ディレクトリに新しくファイルが作成されており、ファイルの内容が「test」とあれば、成功です。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ cat /home/tome/Maildir/new</code></pre>

<h3 id="3.2.9">外部ネットワークへのメール送信確認</h3>
<p>サーバ外にメールが届くかテストを行います。</p>
<p>クライアントから自分の大学用のメールアドレスにメールを送信してメールが届くか確認します。</p>
<pre><code class="language-bash">root@<?php echo $clientHostname; ?>:~$ echo "test" | mail <学籍番号>@st.t-kougei.ac.jp</code></pre>

<h2 id="3.3">Dovecot（POP3）</h2>
<p>Dovecotは、IMAPおよびPOP3の両方のプロトコルに対応したオープンソースのメール受信サーバです。</p>

<p><div class="note"></p>
<p><p><strong>注記:</strong></p></p>
<p><p>既にインストール済みですが、もしインストールされていない場合は以下のコマンドでインストールしてください。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ yum -y install dovecot-core dovecot-pop3d</code></pre>
<p></div></p>

<h3 id="3.3.10">Dovecotの設定</h3>
<p>Dovcotの設定ファイルである<code>/etc/dovecot/dovecot.conf</code>ファイルをviエディタで開きます。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/dovecot/dovecot.conf</code></pre>

<p>protocolsをpop3のみにします。  </p>

<div class="code-file-info">📁 /etc/dovecot/dovecot.conf</div>
<pre><code>protocols = pop3</code></pre>

<p>Dovcotの設定ファイルである<code>/etc/dovecot/conf.d/10-ssl.conf</code>ファイルをviエディタで開きます。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/dovecot/conf.d/10-ssl.conf</code></pre>

<p>SSLを無効にします。</p>

<div class="code-file-info">📁 /etc/dovecot/conf.d/10-ssl.conf</div>
<pre><code>ssl = no</code></pre>
<p>Dovcotの設定ファイルである<code>/etc/dovecot/conf.d/10-auth.conf</code>ファイルをviエディタで開きます。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/dovecot/conf.d/10-auth.conf</code></pre>

<p>プレーンテキスト認証を許可します。</p>

<div class="code-file-info">📁 /etc/dovecot/conf.d/10-auth.conf</div>
<pre><code><span class="git-remove">disable_plaintext_auth = yes</span>
<span class="git-add">disable_plaintext_auth = no</span></code></pre>

<p>Dovcotの設定ファイルである<code>/etc/dovecot/conf.d/10-mail.conf</code>ファイルをviエディタで開きます。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/dovecot/conf.d/10-mail.conf</code></pre>

<p><code>mail_locaution</code> を <code>maildir</code> に変更します。</p>

<div class="code-file-info">📁 /etc/dovecot/conf.d/10-mail.conf</div>
<pre><code>mail_locaution = maildir:~/Maildir</code></pre>

<h3 id="3.3.11">Dovecotの設定の反映</h3>
<p><code>systemctl</code>コマンドでdovecotを再起動します。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ systemctl restart dovecot</code></pre>

<h2 id="3.4">ファイアウォールの設定</h2>
<p><code>firewall-cmd</code>コマンドでファイアウォールを設定します。</p>

<h3 id="3.4.12">firewall-cmdの起動確認</h3>
<p>初めに、firewall-cmdが起動しているかどうか確認します。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ firewall-cmd --state
runnning</code></pre>

<p><code>runnning</code>と表示されれば起動しています。</p>

<p><div class="hint"></p>
<p><p><strong>ヒント:</strong></p></p>
<p><p>もし起動していな場合以下の方法で起動します。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ systemctl start firewalld</code></pre>
<p>また、自動起動を有効にします。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ systemctl enable firewalld</code></pre>
<p></div></p>

<h3 id="3.4.13">許可するサービスの追加</h3>
<p>外部からの接続を許可するサービスを指定します。今回追加するサービスはsmtpとpop3です。以下のようにして許可をします。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ firewall-cmd --permanent --add-service=smtp
success
root@<?php echo $serverHostname; ?>:~$ firewall-cmd --permanent --add-service=pop3
success</code></pre>

<p>コマンドの実行後に<code>success</code>が表示されれば、追加に成功しています。</p>

<h3 id="3.4.14">許可したサービスの設定を反映させる</h3>
<p>追加した設定を以下のコマンドで反映させます。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ firewall-cmd --reload
success</code></pre>

<h3 id="3.4.15">設定の確認</h3>
<p>以下のコマンドで設定した内容を確認できます。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ firewall-cmd --list-all</code></pre>

<pre><code>services: cockpit dhcpv6-client <span class="git-add">pop3 smtp</span> ssh</code></pre>
<p>[services]の項目欄に<code>pop3</code>と<code>smtop</code>があればファイアウォールの設定は完了です。</p>


<h2 id="3.5">クライアントからの動作確認</h2>
<p><?php echo $clientHostname; ?>を起動して、Clientから<code>telnet</code>コマンドを使用してメールの受信を確認します。</p>

<pre><code class="language-bash">tome@client1:~$ telnet <?php echo $serverHostname; ?> 110
Trying <?php echo $serverIP; ?>...
Connected to <?php echo $serverHostname; ?>.
Escape character is '^]'.
<span class="git-add">+OK Dovecto ready.</span></code></pre>
<p><code>+OK Dovecto ready.</code>という情報から、Dovecotに接続できたことが確認できました。</p>

<p><div class="hint"></p>
<p><p><strong>ヒント:</strong></p></p>
<p><p>telnetから抜けるには<code>quit</code>を入力して抜ける。</p>
<pre><code class="language-bash">[root@<?php echo $clientHostname; ?> ~]# telnet <?php echo $serverHostname; ?> 25
…
+OK Dovecot ready.
quit
+OK Logging out
Connection closed by foreign host.</code></pre>
<p></div></p>


<h3 id="3.5.16">メールの内容を確認する</h3>
<p>telnetでDovecotコマンドを入力します。</p>
<p>まず、<code>USER</code>と<code>PASS</code>でログインを行います。</p>
<pre><code class="language-bash">user tome
+OK
pass netsys00
+OK Logged in.</code></pre>
<p><code>+OK Logged in.</code>が表示されればログインされます。</p>

<pre><code class="language-bash">list
+OK 1 message:
1 516</code></pre>

<p><code>+OK 1 message:</code>から1件のメールがあることが確認できます。</p>
<p><code>1 516</code>はメール番号とメールのサイズをバイトで表しています。</p>

<pre><code class="language-bash">retr 1
+OK 516 octets
Return-Path: root@<?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp
X-Original-TO: tome
<略></code></pre>

<p>送信したメールが表示されればメールサーバの構築は完了です。</p>

<h1 id="4">WEBサーバの構築</h1>

<p><div class="note"></p>
<p><p><strong>注記:</strong></p></p>
<p><p>既にインストール済みですが、もしインストールされていない場合は以下のコマンドでインストールしてください。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ yum -y install httpd</code></pre>
<p></div></p>

<h2 id="4.1">httpdの設定</h2>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /etc/httpd/conf/httpd.conf</code></pre>

<p>サーバの名前とポート番号を記載します。</p>

<div class="code-file-info">📁 /etc/httpd/conf/httpd.conf</div>
<pre><code>ServerName <?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp:80</code></pre>

<h2 id="4.2">コンテンツの設置</h2>
<p>サーバが提供するコンテンツを<code>/var/www/html/</code>に設置します。ファイル名は<code>index.html</code>とします。</p>

<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ vi /var/www/html/index.html</code></pre>

<div class="code-file-info">📁 /var/www/html/index.html</div>
<pre><code>hello world</code></pre>

<h2 id="4.3">サーバでの動作確認</h2>
<p>実際にhello worldが表示されるか確認します。</p>

<p>左下のアプリケーションをクリックして検索バーから<code>Firefox</code>と入力して提示されたアプリケーションを起動します。</p>

<p>ナビゲーションバーに<a href="http://<?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp">http://<?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp</a>を入力してアクセスします。</p>

<p>真っ白な背景にhello worldと表示されていればサーバからの確認は成功です。</p>

<h2 id="4.4">ファイアウォールの設定</h2>
<p><code>firewall-cmd</code>コマンドでファイアウォールを設定します。</p>

<h3 id="4.4.17">許可するサービスの追加</h3>
<p>外部からの接続を許可するサービスを指定します。今回追加するサービスはhttpです。以下のようにして許可をします。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ firewall-cmd --permanent --add-service=http
success</code></pre>

<p>コマンドの実行後に<code>success</code>が表示されれば、追加に成功しています。</p>

<h3 id="4.4.18">許可したサービスの設定を反映させる</h3>
<p>追加した設定を以下のコマンドで反映させます。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ firewall-cmd --reload
success</code></pre>

<h3 id="4.4.19">設定の確認</h3>
<p>以下のコマンドで設定した内容を確認できます。</p>
<pre><code class="language-bash">root@<?php echo $serverHostname; ?>:~$ firewall-cmd --list-all</code></pre>

<pre><code>services: cockpit dhcpv6-client <span class="git-add">http</span> pop3 smtp ssh</code></pre>
<p>[services]の項目欄に<code>http</code>があればファイアウォールの設定は完了です。</p>

<h2 id="4.5">クライアントからの動作確認</h2>
<p><?php echo $clientHostname; ?>を起動してfirefoxから、以下のURLにアクセスします。</p>
<p><a href="http://<?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp">http://<?php echo $serverHostname; ?>.netsys.cs.t-kougei.ac.jp</a></p>

<p>真っ白なページに「hello world」とあれば完了です。</p>

<p>以上でOSのインストールと設定は完了となります。</p>


            </main>
        </div>